# 关于图像攥改分割任务的一些知识实践

## 关于评价方式和loss

- soft dice score  
用于衡量预测的分割结果与真实分割标签之间的相似度。它的取值范围在 0 到 1 之间，值越高表示预测结果与真实标签越相似，即分割效果越好。对于一个二分类分割任务（分割为前景和背景），假设p是预测的分割结果（通常是一个概率图，取值范围在 0 到 1 之间）,g是真实的分割标签（二值图像，取值为 0 或 1），N是像素总数，Soft Dice Score 的计算公式为：
$$DSC = \frac{2\times\sum_{i=1}^N p_i g_i}{N\times\sum_{i=1}^N p_i^2 + \sum_{i=1}^N g_i^2}$$
- 传统的 Dice 系数（硬 Dice）使用二值化的预测结果（例如，将预测概率大于某个阈值的像素设置为 1，小于阈值的像素设置为 0）来计算与真实标签的相似度。而 Soft Dice Score 使用的是概率图，没有进行这种硬性的二值化，它考虑了预测概率的所有信息，因此在评估过程中更加精细，对模型性能的刻画更准确，尤其是在处理模糊边界或者不确定的预测时更有优势。
- IoU(交并比)  
IoU也是一种常见分割评价指标，计算公式为：
$$IoU = \frac{\sum_{i=1}^N p_i g_i}{\sum_{i=1}^N (p_i+g_i-p_ig_i)}$$

- Softmax Focal Loss  
这个损失函数在传统机器学习也挺常用的，主要针对分类任务中类别数量极不平衡的问题，就是给予少数类别更高的权重，以解决这个问题。

## 模型结构
以DocTamper这个项目举例，目前的模型算法结构还是以